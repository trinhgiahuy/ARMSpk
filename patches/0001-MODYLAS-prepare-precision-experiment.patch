diff -Nur --no-dereference modylasold/src/main_f90.f modylasnew/src/main_f90.f
--- modylasold/src/main_f90.f	2014-10-02 21:51:23.000000000 +0900
+++ modylasnew/src/main_f90.f	2018-02-26 16:17:35.790906601 +0900
@@ -45,8 +45,25 @@
       use trj_mpi
       use shakerattleroll
 #include "timing.h90"
+      use, intrinsic :: iso_c_binding
       implicit none
+      interface
+      integer(4) function SSC_MARK_START ( i ) bind ( c )
+      integer(4) :: i
+      !!!DEC$ ATTRIBUTES C:: SSC_MARK_START
+      end function
+      integer(4) function SSC_MARK_STOP ( j ) bind ( c )
+      integer(4) :: j
+      !!!DEC$ ATTRIBUTES C:: SSC_MARK_STOP
+      end function
+      end interface
+      include 'mpif.h'
       integer(4) :: i0,k0
+
+      real(8) :: mkrts, mkrte
+      integer(4) :: sscfake = 1
+      sscfake = SSC_MARK_STOP(sscfake)
+
       call mpistart()
       call init_openmp
 
@@ -88,6 +105,8 @@
 c
       if (myrank == 0) write(*,'(/,a)') '**** start main loop'
       TIME_START(TM_MAIN_LOOP)
+      mkrts = MPI_WTIME()
+      sscfake = SSC_MARK_START(sscfake)
       do while (mdstep<md_condition__howmany_steps)
 
         call nve_integrate()
@@ -103,6 +122,10 @@
         TIME_STOP(TM_OUTPUT)
 
       enddo
+      sscfake = SSC_MARK_STOP(sscfake)
+      mkrte = MPI_WTIME()
+      if (myrank == 0) write(*,"(A,F10.6,A)")
+     & "Walltime of the main kernel: ", mkrte - mkrts, " sec"
       TIME_STOP(TM_MAIN_LOOP)
 
       if (myrank == 0) call cleanup()
@@ -112,6 +135,10 @@
       call closing()
 
       call mpiend()
+
+      sscfake = SSC_MARK_START(sscfake)
+      if (myrank == 0) write(*,*) sscfake
+
       stop
       end
 c----------------------------------------------------------------------
diff -Nur --no-dereference modylasold/src/Makefile modylasnew/src/Makefile
--- modylasold/src/Makefile	2014-10-02 21:51:23.000000000 +0900
+++ modylasnew/src/Makefile	2018-02-26 16:17:05.220562285 +0900
@@ -15,9 +15,9 @@
 
 FFLAGS += -DMODYLAS_MINI_VERSION=\"$(VERSION)\"
 
-CFLAGS = -DUSE_MPI
+CFLAGS += -DUSE_MPI
 
-OBJS = fmodules.o main_f90.o app_f90.o \
+OBJS = fmodules.o main_f90.o ssc.o app_f90.o \
   md_charmm_f90.o md_fmm_f90.o md_direct_f90.o \
   nve_integrate.o k_energy.o cell_edge.o \
   mt19937ar.o mpitool.o domain_div.o assign2subcell.o \
diff -Nur --no-dereference modylasold/src/make_setting.intel modylasnew/src/make_setting.intel
--- modylasold/src/make_setting.intel	2014-10-02 21:51:23.000000000 +0900
+++ modylasnew/src/make_setting.intel	2018-02-26 16:17:05.227562364 +0900
@@ -3,5 +3,6 @@
 #
 
 FC = mpif90
-FFLAGS = -fpp -openmp -O3 -xHost
+FFLAGS = -fpp -fopenmp -O3 -ipo -xHost
 CC = mpicc
+CFLAGS = -fopenmp -O3 -ipo -xHost
diff -Nur --no-dereference modylasold/src/ssc.c modylasnew/src/ssc.c
--- modylasold/src/ssc.c	1970-01-01 09:00:00.000000000 +0900
+++ modylasnew/src/ssc.c	2018-02-26 16:17:23.732770790 +0900
@@ -0,0 +1,8 @@
+int ssc_mark_start (int x) {
+	__SSC_MARK(0x111);
+	return (x << 0x1);
+}
+int ssc_mark_stop (int y) {
+	__SSC_MARK(0x222);
+	return (y >> 0x2);
+}
